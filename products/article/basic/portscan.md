---
sidebar_position: 4
---

# 通用能力：端口扫描

Author: `yuqi`

## **一.扫描模式分类**

### **SYN扫描**

`具有权限要求`，Linux下启动yakit需要以root权限启动，windows下需要管理员权限启动，如果不是以root或者管理员权限启动会报如下错误：

![](/img/portscan/image-20211020161241001.png)

### **指纹扫描**

无权限要求，可直接进行扫描，识别端口指纹

### **SYN+指纹扫描**

`具有权限要求`，Linux下启动yakit需要以root权限启动，windows下需要管理员权限启动，如果不是以root或者管理员权限启动会报如下错误：

![](/img/portscan/image-20211020161252161.png)

## **二.扫描目标设置**

1.单个目标ip

2.指定ip网段，如：x.x.x.x/24

## **三.扫描端口设置**

1.指定多个端口，如：22,23,445,3306

2.指定多个端口范围，如：1-333,555-777

## **四.高级选项设置**

### **主动模式**

允许指纹探测主动发包

### **扫描结果入库**

将扫描结果保存到本地数据库，方便后续模糊测试等功能用到扫描结果

### **保存关闭的端口**

将扫描结果中未开启的端口ip也保存到数据库中

### **端口资产管理**

扫描结果将在端口资产管理处展示

### **高级指纹选项**

选择哪种指纹进行扫描

## **五.使用案例**

1.对单个目标扫描，也可以传入要扫描的网段

![](/img/portscan/image-20211020161338950.png)

2.资产管理处查看结果

![](/img/portscan/image-20211020161412680.png)

# 端口扫描高级使用

## 一.高级使用介绍说明

1.进行端口扫描之后，如果想将某些结果ip再拿去进行fuzz测试，那么可以通过语法直接获取

2.在编写一些自定义脚本时，如果要用到扫描结果中某些IP段，那么可以通过语法直接获取

## 二.扫描结果获取方式（获取开放端口）

获取结果可以通过 fuzz 模块的 fuzz 标签进行联动

在 yak 的 `fuzz` 编程中，可以通过 `fuzz.Strings("{{db:ports(x.x.x.x)}}")` 来读取已经扫描的数据库，获取结果

### 获取指定ip的扫描结果：

`{{db:ports(x.x.x.x)}}`

### 获取指定网段的扫描结果

{{db:ports(x.x.x.x/24)}}

## 三.使用案例

`说明`：这里简单做一个请求发包的fuzz测试

1.获取本地127.0.0.1的扫描结果

![](/img/portscan/image-20211021111649632.png)

2.对返回结果中每个数据进行发包模糊测试

![](/img/portscan/image-20211021111509030.png)



