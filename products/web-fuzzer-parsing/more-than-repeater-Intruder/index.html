<!doctype html>
<html class="docs-version-current" lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Yak Official Website Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Yak Official Website Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Yak Official Website" href="/opensearch.xml"><title data-react-helmet="true">Web Fuzzer: MORE than Repeater + Intruder | Yak Official Website</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://yaklang.io/products/web-fuzzer-parsing/more-than-repeater-Intruder"><meta data-react-helmet="true" name="docsearch:language" content="zh-CN"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-products-current"><meta data-react-helmet="true" property="og:title" content="Web Fuzzer: MORE than Repeater + Intruder | Yak Official Website"><meta data-react-helmet="true" name="description" content="如果我们只是想做 Repeater / Intruder 的平替，其实并没有太大的意义。实际上可以基于 Fuzz 模版变形的 Web Fuzzer 的操作在灰度测试的过程中取得了巨大反响，收获了大量好评，同时也有很多关于操作和使用的有效反馈。"><meta data-react-helmet="true" property="og:description" content="如果我们只是想做 Repeater / Intruder 的平替，其实并没有太大的意义。实际上可以基于 Fuzz 模版变形的 Web Fuzzer 的操作在灰度测试的过程中取得了巨大反响，收获了大量好评，同时也有很多关于操作和使用的有效反馈。"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://yaklang.io/products/web-fuzzer-parsing/more-than-repeater-Intruder"><link data-react-helmet="true" rel="alternate" href="https://yaklang.io/products/web-fuzzer-parsing/more-than-repeater-Intruder" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://yaklang.io/en/products/web-fuzzer-parsing/more-than-repeater-Intruder" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://yaklang.io/products/web-fuzzer-parsing/more-than-repeater-Intruder" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://KU1F47O3Q6-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.93f2aafb.css">
<link rel="preload" href="/assets/js/runtime~main.4afd44bd.js" as="script">
<link rel="preload" href="/assets/js/main.4127a4f3.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link diy-link-item">官方文档</a><ul class="dropdown__menu"><li><a href="/docs/intro" class="dropdown__link diy-link-item" target="_blank">Yak 语言</a></li><li><a href="/products/intro" class="dropdown__link diy-link-item" target="_blank">Yakit 平台</a></li></ul></div><a class="navbar__item navbar__link diy-link-item" href="/team">关于我们</a><a class="navbar__item navbar__link diy-link-item" href="/enterpriseCollaboration">企业合作</a><a href="https://chat.yaklang.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link diy-link-item"><span>Ya! 一刻</span></a></div><div class="navbar__items navbar__items--right"><a href="https://yaklang.oss-cn-beijing.aliyuncs.com/yakit-technical-white-paper.pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link diy-link-item"><span>下载白皮书</span></a><a href="https://github.com/yaklang" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link diy-link-item"><span>Github</span></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/products/intro">Yakit: 集成化单兵安全能力平台</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" href="/products/download_and_install">下载与安装指南</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Yakit 中的基础安全工具</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Yakit 技术论述</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Web Fuzzer超全解析</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/products/web-fuzzer-parsing/more-than-repeater-Intruder">Web Fuzzer: MORE than Repeater + Intruder</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/products/web-fuzzer-parsing/thermal-loading-fuzz">热加载Fuzz</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Yakit技术研究</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Yakit 插件体系最佳实践</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Yakit 编程最佳实践</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Yakit 实战案例</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">研发技术漫谈: 技术解析</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">__已过时的文档</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Web Fuzzer: MORE than Repeater + Intruder</h1></header><blockquote><p>如果我们只是想做 Repeater / Intruder 的平替，其实并没有太大的意义。实际上可以基于 Fuzz 模版变形的 Web Fuzzer 的操作在灰度测试的过程中取得了巨大反响，收获了大量好评，同时也有很多关于操作和使用的有效反馈。  </p><p>在迭代了很多个版本，优化了很多交互逻辑，修复了诸多 BUG 之后，我们认为 Web Fuzzer 已经相对比较成熟。</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="背景"></a>背景<a class="hash-link" href="#背景" title="Direct link to heading">#</a></h2><p>其实相比 Burpsuite 的交互式劫持功能，Repeater 和 Intruder 对于 “手工渗透” 来说，其实是大家花的时间最多的。当我们只实现了 Burpsuite 的核心交互式劫持的时候，其实对 Burp 的替代还远不够。</p><p>我们发现他的核心其实并不是某一个功能，而是一整套的操作流：</p><ol><li>劫持 HTTPS</li><li>HTTP History 查看劫持到的请求</li><li>History 中发送需要测试的请求到 “插件” 或者 Repeater / Intruder</li><li>修改数据包，重放 / 爆破</li></ol><p>我们发现，前三步其实只是大家花费大量时间的 “入口”，是一个获取流量的过程，很多时候大家花了大功夫的时间在 Repeater 和 Intruder 上。</p><blockquote><p>为什么发送原始数据包这么简单的事情，很多工具不支持，做不好，自己写的也各种小问题。</p><p>甚至在 Burp 本身的一些细节处理也存在问题</p></blockquote><p>Yakit 使用 yaklang 的核心模糊测试标签语法，实现了对 Repeater 和 Intruder 的完美整合，甚至可以免配置实现批量发包模糊测试。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="快速预览-基础操作流"></a>快速预览: 基础操作流<a class="hash-link" href="#快速预览-基础操作流" title="Direct link to heading">#</a></h2><p>我们使用 Yakit 的交互式劫持功能，可以很容易实现 Burp 的最基础操作流</p><ol><li>开启代理：劫持数据包</li><li>在 History 中右键数据包，发送到 Web Fuzzer</li><li>在 Web Fuzzer 中修改数据包并重放</li></ol><video src="https://yaklang.oss-cn-beijing.aliyuncs.com/video/yakit-burp.mp4" loop="" playsinline="" controls="" autoplay="" style="width:890px"></video><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="快速预览-使用-web-fuzzer-进行爆破"></a>快速预览: 使用 Web Fuzzer 进行爆破<a class="hash-link" href="#快速预览-使用-web-fuzzer-进行爆破" title="Direct link to heading">#</a></h2><blockquote><p>推荐大家升级 Yakit-1.0.13-sp3 与引擎  &gt;= Yakit-1.0.13-sp16</p></blockquote><p>使用 Burp 的 Intruder 爆破其实是任何一个渗透测试同学的必修课，在原数据流程，我们需要做的事情是：</p><ol><li>把需要爆破的数据包发送到 Intruder</li><li>为爆破的位置打标记</li><li>设置字典</li><li>开始爆破</li><li>等待结果，查看爆破过程</li></ol><p>然而在 Yakit 中，这个过程变得更加简单并且符合人的逻辑。</p><ol><li>把需要爆破的数据包发送到 Intruder</li><li>选中需要打标记的位置</li><li>右键选择字典</li><li>发包！</li></ol><p>当然，这类场景非常多，很多时候我们想要的遍历订单类，遍历手机号，甚至遍历 Path 都可以通过这个方式做到，实际 Yakit 在进行标记的时候，和 Burp 略微不同，并不是用序号进行标记，而是通过一个特殊的 Fuzz 标签，标签可以支持非常多的种类。</p><p>比如说，如果要进行一个参数遍历 1-10，在 Yakit 中只需要 {{int(1-10)}} 即可把这个位置用数字 1-10 依次替换。如果需要用到字典，通过 {{x(your-dict)}} 即可把字典内容依次替换标签位置内容，从而达到 Fuzz / 爆破的目的。</p><p>更让人高兴的是，实际上我们的爆破有时候并不完全依赖字典，如果单纯只是想测试少数的几个路径，我们费力去传一个字典，其实有点浪费了，在 Yakit 中我们可以通过 {{list(element1|element2|...)}} 来测试几个特定的值。</p><p>例如，我们以一个具体的案例来看，如下是一个文件包含漏洞的典型数据包。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly HTMLBars"><pre tabindex="0" class="prism-code language-HTMLBars codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET /fileincl/example1.php?page=/etc/{{list(hosts|passwd|nginx.conf)}} HTTP/1.1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Host: 172.16.86.134</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Connection: close</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>针对这个案例，我们在 page=/etc/{{list(hosts|passwd|nginx.conf)}} 设置了一个这样的内容，意味着整个数据包将会被渲染成三个数据包，分别为</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly go"><pre tabindex="0" class="prism-code language-go codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// hosts</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">fileincl</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">example1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">php?page</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">etc</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">hosts HTTP</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token number" style="color:rgb(247, 140, 108)">1.1</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Host</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.86</span><span class="token number" style="color:rgb(247, 140, 108)">.134</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Connection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">close</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// passwd</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">fileincl</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">example1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">php?page</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">etc</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">passwd HTTP</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token number" style="color:rgb(247, 140, 108)">1.1</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Host</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.86</span><span class="token number" style="color:rgb(247, 140, 108)">.134</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Connection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">close</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// nginx.conf</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET </span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">fileincl</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">example1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">php?page</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">etc</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token plain">nginx</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">conf HTTP</span><span class="token operator" style="color:rgb(137, 221, 255)">/</span><span class="token number" style="color:rgb(247, 140, 108)">1.1</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Host</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">172.16</span><span class="token number" style="color:rgb(247, 140, 108)">.86</span><span class="token number" style="color:rgb(247, 140, 108)">.134</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Connection</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(130, 170, 255)">close</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>在 Web Fuzzer 中我们发送这个数据包</p><p><img src="/assets/images/repeater-data-packet-70466762d9c42a7e3eaadbf36d5e25c8.png"></p><p>当我们发送了这种可以渲染的数据包的时候，我们的界面将不再会是之前的左边请求，右边单个响应体的布局，右边将会变成一个列表，列表中每个请求的各种指标：响应大小（Burpsuite 常用），响应内容的相似度，响应 Header 的相似度，Payload 内容可以帮助用户迅速筛选出想要的结果。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="高级案例-可作为-web-扫描器的-fuzzer！"></a>高级案例: 可作为 Web 扫描器的 Fuzzer！<a class="hash-link" href="#高级案例-可作为-web-扫描器的-fuzzer！" title="Direct link to heading">#</a></h2><p>众所周知，在 Burp 的 2021 年 12 月的版本中，才支持可以针对 Host 的 Intruder 配置。<br>
但是实际上，从 Yakit 一出生的时候，就支持这类场景。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="yakit-web-fuzzer-高级配置"></a>Yakit Web Fuzzer 高级配置<a class="hash-link" href="#yakit-web-fuzzer-高级配置" title="Direct link to heading">#</a></h3><blockquote><p>如果直接根据 Host 去发起请求的话，那如何实现 Host 碰撞的问题呢？</p></blockquote><p>这是一个好问题，从 Host 取需要请求的网站是正常的逻辑，但是这种会造成 Host 碰撞的需求无法实现。但是并不代表 Yakit Web Fuzzer 放弃了这个能力</p><p><img src="/assets/images/repeater-advanced-configuration-7e3f6bc7b4baaca49d22ca3fb56797b4.png"></p><p>当我们打开 “高级配置”，我们发现可以静态设置 Host，这个 Host 是实际请求将会采用的 Host，如果设置了他，意味着发包过程中，Web Fuzzer 不会根据数据包的 Host 字段去决定要给谁发送请求了。</p><p>通过固定 Host，我们再在数据包中，对 Hosts 进行 fuzz 标签标记，就可以轻松达到 Host 碰撞的目的。</p><p>同样的，其他的高级配置均可生效，我们可以很容易的配置</p><ol><li>是否启用渲染模版，即是否启用 Web Fuzzer 的 fuzz 标签的功能。</li><li>配置批量数据包发送时候的并发，为了方便理解，配置为 “并发线程”。</li><li>强制开启 HTTPS</li><li>为 Intruder 和 Repeater 快速设置代理（可自动缓存记住配置，不需要每次都重新配）</li><li>设置单个请求的超时时间</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="以一个网段多个端口为目标：批量扫描！"></a>以一个网段+多个端口为目标：批量扫描！<a class="hash-link" href="#以一个网段多个端口为目标：批量扫描！" title="Direct link to heading">#</a></h3><p>要进行批量扫描，我们需要用到新的标签 {{net(network_block)}} 和 {{port(portstr)}}
当我们以</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly HTMLBars"><pre tabindex="0" class="prism-code language-HTMLBars codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{{net(172.168.1.1/24)}}:{{port(80,443,8080)}}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>作为输入时，即使笔者不给大家介绍这个标签，大家也可以从标签内容看出这个标签承担的作用。渲染一段网段，渲染几个端口，然后把渲染出的结果进行笛卡尔乘积：</p><p>大家可以随时在 “数据处理=&gt;Codec=&gt;模糊测试” 功能中测试自己编写的标签模版。</p><p><img src="/assets/images/repeater-batch-scan-eceba6a47a61b14c3f5f1a1b60953dcb.png"></p><p>在有了这个积累之后，我们可以很容易构造一个数据包，来爆破管理员目录<br>
比如说，我们只爆破 admin/, login.php, wp-login  这三个目录，针对某一个网段的 80,443,8080 端口，那么我们的 Payload 很可能长成这样。</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly HTMLBars"><pre tabindex="0" class="prism-code language-HTMLBars codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">GET /{{list(admin/|login.php|wp-login)}} HTTP/1.1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Host: {{net(47.52.100.1/24)}}:{{port(80,443,8080)}}</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Connection: close</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><img src="/assets/images/repeater-batch-scan-select-398c85870d7b8a05f1fc38920cd7572e.png"></p><p>在爆破过程中，我们点击 StatusCode 筛选，可以从状态码筛选出我们想要的内容。<br>
其实在熟练的情况下，我们的核心操作只有：</p><ol><li>编写合适的 Web Fuzzer 模版</li><li>发包！筛选！</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="配合字典：如何在-web-fuzzer-中使用字典？"></a>配合字典：如何在 Web Fuzzer 中使用字典？<a class="hash-link" href="#配合字典：如何在-web-fuzzer-中使用字典？" title="Direct link to heading">#</a></h2><p>在 Web Fuzzer 中使用字典其实非常自然，我们经过各种测试与研究，发现 Burpsuite 的大标签，根据序号选择字典并不是非常自然和科学的习惯。相比之下，我们觉得更人性化的逻辑是：</p><ol><li>选中想要替换的位置，右键</li><li>选择字典进行替换</li></ol><p><img src="/assets/images/repeater-dictionaries-16bce32c638037638df445a7015687d7.png"></p><p>当点击 “插入模糊测试字典标签” 之后将会看到如下对话框。<br>
在新的框中，用户可以选择字典，同时查看里面的内容，在决定要选择哪个字典之后，可以点击 “小闪电” 或者 “选择该 Fuzz 标签”。自动把标签内容替换到 Web Fuzzer 中选中部分。</p><p><img src="/assets/images/repeater-insert-e19a207a993dba81cab816fc318c5b9c.png"></p><p><img src="/assets/images/repeater-insert-send-cd3d30b05b72d799a2e057b76b140322.png"></p><p>再插入了新的标签之后，我们再点击 “发送数据包”，将会在表格中的 Payload 看到这次渲染的 “结果”。值得注意的是</p><p><img src="/assets/images/repeater-insert-careful-ca64b60381bd04e955095b0dafd6cc32.png"></p><p>当用户可以完成我上述的一些操作的时候，发现其实 Repeater 和 Intruder 的功能是完全可以有一种 “奇妙的结合” 的，原本在 Burpsuite 中需要 Repeater 和 Intruder 切换的功能，在 Yakit 的 Web Fuzzer 中通过 Fuzz 标签得到了平衡，同时摒弃了 “不直观” 的问题，真的所见即所得。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="技术补充说明："></a>技术补充说明：<a class="hash-link" href="#技术补充说明：" title="Direct link to heading">#</a></h2><ol><li>在最新的 Yak 引擎中 (yak-1.0.13-sp18)，<span style="background:#fff67acc">劫持代理并不会为劫持到的请求增加 &quot;Connection: close&quot;。对于一些要通过 Connection: close 来判断是否被调试的 Web 应用来说，这种方式只能针对 Burpsuite。</span></li><li>Web Fuzzer 会对数据包进行修复，修复的内容如下：<ol><li>解决数据包的 CRLF 的问题</li><li>如果数据包是 multipart/form-data，也会修复这种数据结构下的 CRLF</li><li>兼容 Chunk（右键可以进行 Chunk 编码）</li><li>自动修复 Content-Length，如果为 0，则不显示</li><li><span style="background:#fff67acc">不会自动增加或修改 Connection 字段</span></li></ol></li><li>Web Fuzzer 的模糊测试解决方案本质上是 Yak 语言 fuzz 模块的扩展</li><li>本文介绍的几种常见的标签内容，在 <a href="https://www.yaklang.io/docs/buildinlibs/lib_fuzz" target="_blank" rel="noopener noreferrer">https://www.yaklang.io/docs/buildinlibs/lib_fuzz</a> 中可以找到详细的教程</li><li>Yak 语言中的 poc.HTTP (<a href="https://www.yaklang.io/docs/yakexamples/http-raw" target="_blank" rel="noopener noreferrer">https://www.yaklang.io/docs/yakexamples/http-raw</a>) 其实和 Web Fuzzer 的核心功能一样，可以说是单体发包的可编程实现。高并发版本是：httpool.Pool (<a href="https://www.yaklang.io/docs/yakexamples/batch-http" target="_blank" rel="noopener noreferrer">https://www.yaklang.io/docs/yakexamples/batch-http</a>)</li></ol><blockquote><p>Connection: close / keep-alive 额外说明：</p><p>我们假定来自于响应的数据包不畸形，那么一个 HTTP 数据包是不是完整的，并不应该取决于 Connection close/keep-alive. 而是应该由 HTTP 协议内容来决定，比如 Transfer-Encoding: chunked 读完了吗？比如 Content-Length 的长度是否正确？Bytes / Range 设置。</p><p>在大部分渗透测试过程中，我们并不需要保持连接，但是 Connection: close 有时会成为累赘（他在 HTTP/1.1 和 HTTP/1.0 是不一样的），因此擅自改动会导致代理性能降低，或者不兼容 HTTP/1.1 强制只允许默认行为的应用，例如宝塔面板 （@奶权 师傅提供案例）</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="并不是终点"></a>并不是终点<a class="hash-link" href="#并不是终点" title="Direct link to heading">#</a></h2><p>其实虽然 Web Fuzzer 的已经初具雏形，但是扪心自问一些细节仍然处理的还不够好，并且 Web Fuzzer 应该还可以支持更多更强的功能：</p><p>比如说，</p><ol><li>Web Fuzzer 的数据包应该可以和新的插件系统进行关联，在右键菜单中可以直接使用数据包进行漏洞扫描。</li><li>发送的目标可以基于 unix-socket 而不应该局限于 TCP</li><li>更多更强的标签也应该有被开发，诸如：<ol><li>{{repeat(times)}} 标签: 直接重复一定次数，用于测试逻辑漏洞和竞争问题，暂时可用 {{randstr(0,0,10)}} 代替</li><li>{{file(filename)}} 标签: 直接选择一个文件名作为输入，可以加载文件</li><li>{{files(file1|file2|file3|dir)}} 标签: 直接选择一个文件名作为输入，可以加载多个文件内容，可以支持针对文件上传的文件内容的批量测试</li></ol></li></ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/products/professional/icmp-tcp"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« ICMP Size Logger &amp; TCP Port Logger</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/products/web-fuzzer-parsing/thermal-loading-fuzz"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">热加载Fuzz »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#背景" class="table-of-contents__link">背景</a></li><li><a href="#快速预览-基础操作流" class="table-of-contents__link">快速预览: 基础操作流</a></li><li><a href="#快速预览-使用-web-fuzzer-进行爆破" class="table-of-contents__link">快速预览: 使用 Web Fuzzer 进行爆破</a></li><li><a href="#高级案例-可作为-web-扫描器的-fuzzer！" class="table-of-contents__link">高级案例: 可作为 Web 扫描器的 Fuzzer！</a><ul><li><a href="#yakit-web-fuzzer-高级配置" class="table-of-contents__link">Yakit Web Fuzzer 高级配置</a></li><li><a href="#以一个网段多个端口为目标：批量扫描！" class="table-of-contents__link">以一个网段+多个端口为目标：批量扫描！</a></li></ul></li><li><a href="#配合字典：如何在-web-fuzzer-中使用字典？" class="table-of-contents__link">配合字典：如何在 Web Fuzzer 中使用字典？</a></li><li><a href="#技术补充说明：" class="table-of-contents__link">技术补充说明：</a></li><li><a href="#并不是终点" class="table-of-contents__link">并不是终点</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="div--flex footer__bottom text--center"><div class="footer-logo-copyright-navigation"><div class="margin-bottom--sm"><a class="footer-link" href="/"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/img/logo.png" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright copyright-style">Copyright © 2022 for Yak Project. Own by v1ll4n. Powered by Docusaurus</div><div class="link-body"><a class="footer__link-item" href="/docs/intro" target="_blank">官方文档</a><a class="footer__link-item" href="/team">关于我们</a></div></div><div class="footer-contact-me"><a href="https://github.com/yaklang/yakit" target="_blank" class="contact-icon-body"><span role="img" aria-label="github" class="anticon anticon-github icon-style github-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="github" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0138.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg></span></a><div class="contact-icon-body"><span role="img" aria-label="wechat" class="anticon anticon-wechat icon-style wechat-icon"><svg viewBox="64 64 896 896" focusable="false" data-icon="wechat" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M690.1 377.4c5.9 0 11.8.2 17.6.5-24.4-128.7-158.3-227.1-319.9-227.1C209 150.8 64 271.4 64 420.2c0 81.1 43.6 154.2 111.9 203.6a21.5 21.5 0 019.1 17.6c0 2.4-.5 4.6-1.1 6.9-5.5 20.3-14.2 52.8-14.6 54.3-.7 2.6-1.7 5.2-1.7 7.9 0 5.9 4.8 10.8 10.8 10.8 2.3 0 4.2-.9 6.2-2l70.9-40.9c5.3-3.1 11-5 17.2-5 3.2 0 6.4.5 9.5 1.4 33.1 9.5 68.8 14.8 105.7 14.8 6 0 11.9-.1 17.8-.4-7.1-21-10.9-43.1-10.9-66 0-135.8 132.2-245.8 295.3-245.8zm-194.3-86.5c23.8 0 43.2 19.3 43.2 43.1s-19.3 43.1-43.2 43.1c-23.8 0-43.2-19.3-43.2-43.1s19.4-43.1 43.2-43.1zm-215.9 86.2c-23.8 0-43.2-19.3-43.2-43.1s19.3-43.1 43.2-43.1 43.2 19.3 43.2 43.1-19.4 43.1-43.2 43.1zm586.8 415.6c56.9-41.2 93.2-102 93.2-169.7 0-124-120.8-224.5-269.9-224.5-149 0-269.9 100.5-269.9 224.5S540.9 847.5 690 847.5c30.8 0 60.6-4.4 88.1-12.3 2.6-.8 5.2-1.2 7.9-1.2 5.2 0 9.9 1.6 14.3 4.1l59.1 34c1.7 1 3.3 1.7 5.2 1.7a9 9 0 006.4-2.6 9 9 0 002.6-6.4c0-2.2-.9-4.4-1.4-6.6-.3-1.2-7.6-28.3-12.2-45.3-.5-1.9-.9-3.8-.9-5.7.1-5.9 3.1-11.2 7.6-14.5zM600.2 587.2c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c0 19.8-16.2 35.9-36 35.9zm179.9 0c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9a36.08 36.08 0 01-36 35.9z"></path></svg></span></div></div></div></div></footer></div>
<script src="/assets/js/runtime~main.4afd44bd.js"></script>
<script src="/assets/js/main.4127a4f3.js"></script>
</body>
</html>